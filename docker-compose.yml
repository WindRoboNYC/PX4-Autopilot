networks:
  emp-network:

services:
  simulation:
    image: ros2_px4:v1
    container_name: px4
    tty: true
    volumes:
      - ./:/src/PX4-Autopilot/:rw
      - /tmp/.X11-unix:/tmp/.X11-unix:ro
      - /home/windrobo/windrobo/windrobo_ws:/src/ros2_environment/windrobo_ws
    privileged: true
    networks:
      - emp-network
    environment:
      - DISPLAY=:0
    depends_on:
      - ros2
  uxrce:
    build:
      context: .
      dockerfile: xrce.Dockerfile
    image: ubuntu-xrcedds-suite
    container_name: uxrcedds
    tty: true
    networks:
      - emp-network
  qgc:
    build:
      context: .
      dockerfile: qgc.Dockerfile
    container_name: qgroundcontrol
    environment:
      - DISPLAY=:0
    volumes:
      - /tmp/.X11-unix:/tmp/.X11-unix:ro
      - /dev:/dev
    privileged: true
    tty: true
    networks:
      - emp-network
  ros2:
    image: ros2_ws:v2
    container_name: ros2
    tty: true
    networks:
      - emp-network
    environment:
      - LOCAL_USER_ID=$(id -u)
      - DISPLAY=:0
    volumes:
      - /home/windrobo/windrobo/windrobo_ws:/src/ros2_environment/windrobo_ws
      - /tmp/.X11-unix:/tmp/.X11-unix:ro
    privileged: true